{"remainingRequest":"D:\\web\\react-ritch-markdown\\node_modules\\thread-loader\\dist\\cjs.js??ref--5-1!D:\\web\\react-ritch-markdown\\node_modules\\babel-loader\\lib\\index.js??ref--5-2!D:\\web\\react-ritch-markdown\\node_modules\\source-map-loader\\index.js!D:\\web\\react-ritch-markdown\\src\\editor\\markdown\\index.jsx","dependencies":[{"path":"D:\\web\\react-ritch-markdown\\src\\editor\\markdown\\index.jsx","mtime":1609924853221},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\source-map-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcbm9kZV9tb2R1bGVzXFxiYWJlbC1wcmVzZXQtcmVhY3QtYXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkQ6XFx3ZWJcXHJlYWN0LXJpdGNoLW1hcmtkb3duXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKdmFyIF9qc3hGaWxlTmFtZSA9ICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcc3JjXFxlZGl0b3JcXG1hcmtkb3duXFxpbmRleC5qc3giOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsWyJkZWZhdWx0Il0uc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCmltcG9ydCBSZWFjdCBmcm9tICJyZWFjdCI7CmltcG9ydCBNZEVkaXRvciBmcm9tICJyZWFjdC1tYXJrZG93bi1lZGl0b3ItbGl0ZSI7CmltcG9ydCBNYXJrZG93bkl0IGZyb20gIm1hcmtkb3duLWl0IjsKaW1wb3J0IEF4aW9zIGZyb20gImF4aW9zIjsgLy8g6K+t5rOV6auY5Lqu5o+S5Lu2CgppbXBvcnQgaGxqcyBmcm9tICJoaWdobGlnaHQuanMiOyAvLyDmtYHnqIvlm77mj5Lku7YKCmltcG9ydCBtYXJrZG93bkl0TWVybWFpZCBmcm9tICJAbGlyYWRiMjAwMC9tYXJrZG93bi1pdC1tZXJtYWlkIjsKaW1wb3J0IEltYWdlUGx1Z2luIGZyb20gIi4vcGx1Z2luL2ltYWdlUGx1Z2luIjsKaW1wb3J0IEZpbGVQbHVnaW4gZnJvbSAiLi9wbHVnaW4vZmlsZVBsdWdpbiI7CmltcG9ydCBMaW5rUGx1Z2luIGZyb20gIi4vcGx1Z2luL2xpbmtQbHVnaW4iOwppbXBvcnQgSW5uZXJNZW51IGZyb20gIi4vcGx1Z2luL2lubmVyTWVudVBsdWdpbiI7IC8vIOWvvOWFpee8lui+keWZqOeahOagt+W8jwoKaW1wb3J0ICJyZWFjdC1tYXJrZG93bi1lZGl0b3ItbGl0ZS9saWIvaW5kZXguY3NzIjsgLy8g6Ieq5a6a5LmJ5qC35byPCgppbXBvcnQgIi4vaW5kZXgubGVzcyI7IC8vCgpNZEVkaXRvci51c2UoSW1hZ2VQbHVnaW4pOwpNZEVkaXRvci51c2UoRmlsZVBsdWdpbik7Ck1kRWRpdG9yLnVzZShMaW5rUGx1Z2luKTsKTWRFZGl0b3IudXNlKElubmVyTWVudSk7CnZhciBtZFBhcnNlciA9IG5ldyBNYXJrZG93bkl0KHsKICBicmVha3M6IHRydWUsCiAgLy8g6L2s5o2i5q616JC96YeM55qEICdcbicg5YiwIDxicj7jgIIKICBsaW5raWZ5OiB0cnVlLAogIC8vIOWwhuexu+S8vCBVUkwg55qE5paH5pys6Ieq5Yqo6L2s5o2i5Li66ZO+5o6l44CCCiAgdHlwb2dyYXBoZXI6IHRydWUsCiAgLy8g5ZCv55So5LiA5Lqb6K+t6KiA5Lit56uL55qE5pu/5o2iICsg5byV5Y+3576O5YyWCiAgaHRtbDogdHJ1ZSwKICBoaWdobGlnaHQ6IGZ1bmN0aW9uIGhpZ2hsaWdodChzdHIsIGxhbmcpIHsKICAgIGlmIChsYW5nICYmIGhsanMuZ2V0TGFuZ3VhZ2UobGFuZykpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gaGxqcy5oaWdobGlnaHQobGFuZywgc3RyKS52YWx1ZTsKICAgICAgfSBjYXRjaCAoX18pIHt9CiAgICB9CgogICAgcmV0dXJuICIiOyAvLyDkvb/nlKjpop3lpJbnmoTpu5jorqTovazkuYkKICB9Cn0pLnVzZShyZXF1aXJlKCJtYXJrZG93bi1pdC10b2MiKSkudXNlKG1hcmtkb3duSXRNZXJtYWlkKTsKCnZhciBNYXJrRG93biA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogIF9pbmhlcml0cyhNYXJrRG93biwgX1JlYWN0JENvbXBvbmVudCk7CgogIGZ1bmN0aW9uIE1hcmtEb3duKHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1hcmtEb3duKTsKCiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihNYXJrRG93bikuY2FsbCh0aGlzLCBwcm9wcykpOwogICAgX3RoaXMuTWRFZGl0b3JSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTsKCiAgICBfdGhpcy5oYW5kbGVFZGl0b3JDaGFuZ2UgPSBmdW5jdGlvbiAoX3JlZikgewogICAgICB2YXIgaHRtbCA9IF9yZWYuaHRtbCwKICAgICAgICAgIHRleHQgPSBfcmVmLnRleHQ7CgogICAgICBfdGhpcy5wcm9wcy5nZXRWYWx1ZSh0ZXh0KTsKICAgIH07CgogICAgX3RoaXMuY2xlYXJDb250ZW50ID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoX3RoaXMuTWRFZGl0b3JSZWYuY3VycmVudCkgewogICAgICAgIF90aGlzLk1kRWRpdG9yUmVmLmN1cnJlbnQuc2V0VGV4dCgiIik7CiAgICAgIH0KICAgIH07CgogICAgX3RoaXMucmVuZGVySFRNTCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICByZXR1cm4gbWRQYXJzZXIucmVuZGVyKHZhbHVlKTsKICAgIH07CgogICAgX3RoaXMubXlVcGxvYWRGbiA9IGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIG9iaiA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgb2JqLmFwcGVuZCgiZmlsZSIsIGZpbGUpOwogICAgICAgICAgQXhpb3MucG9zdCgiL2FwaS9zaXRlL21hcmtkb3duX2ltYWdlIiwgb2JqKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgICAgcmVzb2x2ZShkYXRhLnVybCk7CiAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgfSk7CiAgICB9OwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBkZWZhdWx0VmFsdWU6IG51bGwKICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTWFya0Rvd24sIFt7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHsKICAgICAgaWYgKHByZXZQcm9wcy5kZWZhdWx0VmFsdWUgIT09IHRoaXMuc3RhdGUuZGVmYXVsdFZhbHVlKSB7CiAgICAgICAgdGhpcy5NZEVkaXRvclJlZi5jdXJyZW50LnNldFRleHQocHJldlByb3BzLmRlZmF1bHRWYWx1ZSk7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHByZXZQcm9wcy5kZWZhdWx0VmFsdWUKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIF9fc2VsZjogdGhpcywKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDkzLAogICAgICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNZEVkaXRvciwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBoZWlnaHQ6ICI1MDBweCIKICAgICAgICB9LAogICAgICAgIHJlbmRlckhUTUw6IGZ1bmN0aW9uIHJlbmRlckhUTUwodGV4dCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5yZW5kZXJIVE1MKHRleHQpOwogICAgICAgIH0sCiAgICAgICAgb25DaGFuZ2U6IHRoaXMuaGFuZGxlRWRpdG9yQ2hhbmdlLAogICAgICAgIHJlZjogdGhpcy5NZEVkaXRvclJlZiwKICAgICAgICBvbkltYWdlVXBsb2FkOiB0aGlzLm15VXBsb2FkRm4sCiAgICAgICAgX19zZWxmOiB0aGlzLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogOTQsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbCIsCiAgICAvLyBAdHMtaWdub3JlCiAgICB2YWx1ZTogZnVuY3Rpb24gX19yZWFjdHN0YW5kaW5fX3JlZ2VuZXJhdGVCeUV2YWwoa2V5LCBjb2RlKSB7CiAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgdGhpc1trZXldID0gZXZhbChjb2RlKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBNYXJrRG93bjsKfShSZWFjdC5Db21wb25lbnQpOwoKTWFya0Rvd24uZGVmYXVsdFByb3BzID0gewogIGdldFZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZShkYXRhKSB7CiAgICByZXR1cm4gZGF0YTsKICB9LAogIGRlZmF1bHRWYWx1ZTogJycKfTsKdmFyIF9kZWZhdWx0ID0gTWFya0Rvd247CmV4cG9ydCBkZWZhdWx0IF9kZWZhdWx0OwoKaWYgKHR5cGVvZiBNYXJrRG93biAhPT0gJ3VuZGVmaW5lZCcgJiYgTWFya0Rvd24gJiYgTWFya0Rvd24gPT09IE9iamVjdChNYXJrRG93bikgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShNYXJrRG93bikpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFya0Rvd24sICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJNYXJrRG93biIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxlZGl0b3JcXG1hcmtkb3duXFxpbmRleC5qc3giCiAgICB9CiAgfSk7Cn0KCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQgOiB1bmRlZmluZWQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKG1kUGFyc2VyLCAibWRQYXJzZXIiLCAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXHNyY1xcZWRpdG9yXFxtYXJrZG93blxcaW5kZXguanN4Iik7CiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoTWFya0Rvd24sICJNYXJrRG93biIsICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcc3JjXFxlZGl0b3JcXG1hcmtkb3duXFxpbmRleC5qc3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXHNyY1xcZWRpdG9yXFxtYXJrZG93blxcaW5kZXguanN4Iik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5sZWF2ZU1vZHVsZSA6IHVuZGVmaW5lZDsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["D:/web/react-ritch-markdown/src/editor/markdown/index.jsx"],"names":["React","MdEditor","MarkdownIt","Axios","hljs","markdownItMermaid","ImagePlugin","FilePlugin","LinkPlugin","InnerMenu","use","mdParser","breaks","linkify","typographer","html","highlight","str","lang","getLanguage","value","__","require","MarkDown","props","MdEditorRef","createRef","handleEditorChange","text","getValue","clearContent","current","setText","renderHTML","render","myUploadFn","file","Promise","resolve","reader","FileReader","onload","obj","FormData","append","post","then","res","data","url","readAsDataURL","state","defaultValue","prevProps","setState","height","Component","defaultProps"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport MdEditor from \"react-markdown-editor-lite\";\r\nimport MarkdownIt from \"markdown-it\";\r\nimport Axios from \"axios\";\r\n\r\n// 语法高亮插件\r\nimport hljs from \"highlight.js\";\r\n// 流程图插件\r\nimport markdownItMermaid from \"@liradb2000/markdown-it-mermaid\";\r\n\r\nimport ImagePlugin from \"./plugin/imagePlugin\";\r\nimport FilePlugin from \"./plugin/filePlugin\";\r\nimport LinkPlugin from \"./plugin/linkPlugin\";\r\nimport InnerMenu from \"./plugin/innerMenuPlugin\";\r\n// 导入编辑器的样式\r\nimport \"react-markdown-editor-lite/lib/index.css\";\r\n\r\n// 自定义样式\r\nimport \"./index.less\";\r\n\r\n//\r\nMdEditor.use(ImagePlugin);\r\nMdEditor.use(FilePlugin);\r\nMdEditor.use(LinkPlugin);\r\nMdEditor.use(InnerMenu);\r\n\r\nconst mdParser = new MarkdownIt({\r\n  breaks: true, // 转换段落里的 '\\n' 到 <br>。\r\n  linkify: true, // 将类似 URL 的文本自动转换为链接。\r\n  typographer: true, // 启用一些语言中立的替换 + 引号美化\r\n  html: true,\r\n  highlight: function (str, lang) {\r\n    if (lang && hljs.getLanguage(lang)) {\r\n      try {\r\n        return hljs.highlight(lang, str).value;\r\n      } catch (__) {}\r\n    }\r\n    return \"\"; // 使用额外的默认转义\r\n  },\r\n})\r\n  .use(require(\"markdown-it-toc\"))\r\n  .use(markdownItMermaid);\r\n\r\nclass MarkDown extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      defaultValue: null,\r\n    };\r\n  }\r\n\r\n  MdEditorRef = React.createRef();\r\n\r\n  handleEditorChange = ({ html, text }) => {\r\n    this.props.getValue(text);\r\n  };\r\n\r\n  clearContent = () => {\r\n    if (this.MdEditorRef.current) {\r\n      this.MdEditorRef.current.setText(\"\");\r\n    }\r\n  };\r\n\r\n  renderHTML = (value) => {\r\n    return mdParser.render(value);\r\n  };\r\n\r\n  // 粘贴图片上传\r\n  myUploadFn = (file) => {\r\n    return new Promise((resolve) => {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        let obj = new FormData();\r\n        obj.append(\"file\", file);\r\n        Axios.post(\"/api/site/markdown_image\", obj).then((res) => {\r\n          let { data } = res;\r\n          resolve(data.url);\r\n        });\r\n      };\r\n      reader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.defaultValue !== this.state.defaultValue) {\r\n      this.MdEditorRef.current.setText(prevProps.defaultValue);\r\n      this.setState({ defaultValue: prevProps.defaultValue });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <MdEditor\r\n          style={{ height: \"500px\" }}\r\n          renderHTML={(text) => this.renderHTML(text)}\r\n          onChange={this.handleEditorChange}\r\n          ref={this.MdEditorRef}\r\n          onImageUpload={this.myUploadFn}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMarkDown.defaultProps = {\r\n  getValue: (data) => {\r\n    return data;\r\n  },\r\n  defaultValue:''\r\n};\r\nexport default MarkDown;\r\n"]}]}