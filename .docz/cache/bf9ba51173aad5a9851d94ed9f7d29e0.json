{"remainingRequest":"D:\\web\\react-ritch-markdown\\node_modules\\thread-loader\\dist\\cjs.js??ref--5-1!D:\\web\\react-ritch-markdown\\node_modules\\babel-loader\\lib\\index.js??ref--5-2!D:\\web\\react-ritch-markdown\\node_modules\\source-map-loader\\index.js!D:\\web\\react-ritch-markdown\\src\\editor\\markdown\\plugin\\filePlugin\\index.jsx","dependencies":[{"path":"D:\\web\\react-ritch-markdown\\src\\editor\\markdown\\plugin\\filePlugin\\index.jsx","mtime":1609924853222},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\source-map-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcbm9kZV9tb2R1bGVzXFxiYWJlbC1wcmVzZXQtcmVhY3QtYXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkQ6XFx3ZWJcXHJlYWN0LXJpdGNoLW1hcmtkb3duXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKdmFyIF9qc3hGaWxlTmFtZSA9ICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcc3JjXFxlZGl0b3JcXG1hcmtkb3duXFxwbHVnaW5cXGZpbGVQbHVnaW5cXGluZGV4LmpzeCI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5lbnRlck1vZHVsZSA6IHVuZGVmaW5lZDsKICBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOwp9KSgpOwoKdmFyIF9fc2lnbmF0dXJlX18gPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWxbImRlZmF1bHQiXS5zaWduYXR1cmUgOiBmdW5jdGlvbiAoYSkgewogIHJldHVybiBhOwp9OwoKLyoNCiAqIEBBdXRvcjogQ2xhaXJvbGwNCiAqIEBEYXRlOiAyMDIwLTA4LTI3IDE2OjUxOjE5DQogKiBATGFzdEVkaXRUaW1lOiAyMDIwLTEyLTIzIDE0OjA3OjA1DQogKiBARW1haWw6IDE3NTUwMzM0NDVAcXEuY29tDQogKiBAZGVzY3JpcHRpb246IOWfuuS6jnJlYWN0LW1hcmtkb3duLWVkaXRvci1saXRlIOeahOaWh+S7tuS4iuS8oOe7hOS7tg0KICovCmltcG9ydCBSZWFjdCBmcm9tICJyZWFjdCI7CmltcG9ydCB7IFBsdWdpbkNvbXBvbmVudCB9IGZyb20gInJlYWN0LW1hcmtkb3duLWVkaXRvci1saXRlIjsKaW1wb3J0IHsgVXBsb2FkLCBtZXNzYWdlIH0gZnJvbSAiYW50ZCI7CmltcG9ydCB7IFVwbG9hZE91dGxpbmVkIH0gZnJvbSAiQGFudC1kZXNpZ24vaWNvbnMiOwoKdmFyIENvdW50ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QbHVnaW5Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoQ291bnRlciwgX1BsdWdpbkNvbXBvbmVudCk7CgogIGZ1bmN0aW9uIENvdW50ZXIoKSB7CiAgICB2YXIgX2dldFByb3RvdHlwZU9mMjsKCiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvdW50ZXIpOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9nZXRQcm90b3R5cGVPZjIgPSBfZ2V0UHJvdG90eXBlT2YoQ291bnRlcikpLmNhbGwuYXBwbHkoX2dldFByb3RvdHlwZU9mMiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpOwoKICAgIF90aGlzLnVwbG9hZENoYW5nZSA9IGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAiZG9uZSIpIHsKICAgICAgICAvLyDmj5LlhaVNYXJrZG93bgogICAgICAgIHZhciBzdHIgPSAiWyIuY29uY2F0KGluZm8uZmlsZS5yZXNwb25zZS5kYXRhLmZpbGVfbmFtZSwgIl0oIikuY29uY2F0KGluZm8uZmlsZS5yZXNwb25zZS5kYXRhLnVybCwgIikiKTsKCiAgICAgICAgX3RoaXMuZWRpdG9yLmluc2VydFRleHQoc3RyKTsKICAgICAgfSBlbHNlIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAiZXJyb3IiKSB7CiAgICAgICAgbWVzc2FnZS5lcnJvcigi5Zu+54mH5LiK5Lyg5aSx6LSlIik7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKENvdW50ZXIsIFt7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiYnV0dG9uIGJ1dHRvbi10eXBlLWNvdW50ZXIiLAogICAgICAgIHRpdGxlOiAiXHU2M0QyXHU1MTY1XHU2NTg3XHU0RUY2IiwKICAgICAgICBfX3NlbGY6IHRoaXMsCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiAzMSwKICAgICAgICAgIGNvbHVtbk51bWJlcjogNwogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVXBsb2FkLCB7CiAgICAgICAgYWN0aW9uOiAiL2FwaS9zaXRlL2FubmV4IiwKICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoaW5mbykgewogICAgICAgICAgcmV0dXJuIF90aGlzMi51cGxvYWRDaGFuZ2UoaW5mbyk7CiAgICAgICAgfSwKICAgICAgICBuYW1lOiAiMCIsCiAgICAgICAgX19zZWxmOiB0aGlzLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogMzIsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFVwbG9hZE91dGxpbmVkLCB7CiAgICAgICAgX19zZWxmOiB0aGlzLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogMzcsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDExCiAgICAgICAgfQogICAgICB9KSkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9fcmVhY3RzdGFuZGluX19yZWdlbmVyYXRlQnlFdmFsIiwKICAgIC8vIEB0cy1pZ25vcmUKICAgIHZhbHVlOiBmdW5jdGlvbiBfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbChrZXksIGNvZGUpIHsKICAgICAgLy8gQHRzLWlnbm9yZQogICAgICB0aGlzW2tleV0gPSBldmFsKGNvZGUpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIENvdW50ZXI7Cn0oUGx1Z2luQ29tcG9uZW50KTsKCkNvdW50ZXIucGx1Z2luTmFtZSA9ICJmaWxlLXVwbG9hZCI7CkNvdW50ZXIuYWxpZ24gPSAibGVmdCI7CnZhciBfZGVmYXVsdCA9IENvdW50ZXI7CmV4cG9ydCBkZWZhdWx0IF9kZWZhdWx0OwoKaWYgKHR5cGVvZiBDb3VudGVyICE9PSAndW5kZWZpbmVkJyAmJiBDb3VudGVyICYmIENvdW50ZXIgPT09IE9iamVjdChDb3VudGVyKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKENvdW50ZXIpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvdW50ZXIsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJDb3VudGVyIiwKICAgICAgZmlsZW5hbWU6ICJzcmNcXGVkaXRvclxcbWFya2Rvd25cXHBsdWdpblxcZmlsZVBsdWdpblxcaW5kZXguanN4IgogICAgfQogIH0pOwp9Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5kZWZhdWx0IDogdW5kZWZpbmVkOwoKICBpZiAoIXJlYWN0SG90TG9hZGVyKSB7CiAgICByZXR1cm47CiAgfQoKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihDb3VudGVyLCAiQ291bnRlciIsICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcc3JjXFxlZGl0b3JcXG1hcmtkb3duXFxwbHVnaW5cXGZpbGVQbHVnaW5cXGluZGV4LmpzeCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKF9kZWZhdWx0LCAiZGVmYXVsdCIsICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcc3JjXFxlZGl0b3JcXG1hcmtkb3duXFxwbHVnaW5cXGZpbGVQbHVnaW5cXGluZGV4LmpzeCIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwubGVhdmVNb2R1bGUgOiB1bmRlZmluZWQ7CiAgbGVhdmVNb2R1bGUgJiYgbGVhdmVNb2R1bGUobW9kdWxlKTsKfSkoKTs="},{"version":3,"sources":["D:/web/react-ritch-markdown/src/editor/markdown/plugin/filePlugin/index.jsx"],"names":["React","PluginComponent","Upload","message","UploadOutlined","Counter","uploadChange","info","file","status","str","response","data","file_name","url","editor","insertText","error","pluginName","align"],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,4BAAhC;AACA,SAASC,MAAT,EAAiBC,OAAjB,QAAgC,MAAhC;AACA,SAASC,cAAT,QAA+B,mBAA/B;;IAEMC,O;;;;;;;;;;;;;;;;UAMJC,Y,GAAe,UAACC,IAAD,EAAU;AACvB,UAAIA,IAAI,CAACC,IAAL,CAAUC,MAAV,KAAqB,MAAzB,EAAiC;AAC/B;AACA,YAAIC,GAAG,cAAOH,IAAI,CAACC,IAAL,CAAUG,QAAV,CAAmBC,IAAnB,CAAwBC,SAA/B,eAA6CN,IAAI,CAACC,IAAL,CAAUG,QAAV,CAAmBC,IAAnB,CAAwBE,GAArE,MAAP;;AACA,cAAKC,MAAL,CAAYC,UAAZ,CAAuBN,GAAvB;AACD,OAJD,MAIO,IAAIH,IAAI,CAACC,IAAL,CAAUC,MAAV,KAAqB,OAAzB,EAAkC;AACvCN,QAAAA,OAAO,CAACc,KAAR,CAAc,QAAd;AACD;AACF,K;;;;;;;6BAEQ;AAAA;;AACP,0BACE;AAAM,QAAA,SAAS,EAAC,4BAAhB;AAA6C,QAAA,KAAK,EAAC,0BAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AACE,QAAA,MAAM,EAAC,iBADT;AAEE,QAAA,QAAQ,EAAE,kBAACV,IAAD;AAAA,iBAAU,MAAI,CAACD,YAAL,CAAkBC,IAAlB,CAAV;AAAA,SAFZ;AAGE,QAAA,IAAI,EAAC,GAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADF,CADF;AAWD;;;;;;;;;;;EA5BmBN,e;;AAAhBI,O,CAEGa,U,GAAa,a;AAFhBb,O,CAIGc,K,GAAQ,M;eA0BFd,O;AAAf;;;;;;;;;;;;;;;;;;;;;;0BA9BMA,O","sourcesContent":["/*\r\n * @Autor: Clairoll\r\n * @Date: 2020-08-27 16:51:19\r\n * @LastEditTime: 2020-12-23 14:07:05\r\n * @Email: 1755033445@qq.com\r\n * @description: 基于react-markdown-editor-lite 的文件上传组件\r\n */\r\nimport React from \"react\";\r\nimport { PluginComponent } from \"react-markdown-editor-lite\";\r\nimport { Upload, message } from \"antd\";\r\nimport { UploadOutlined } from \"@ant-design/icons\";\r\n\r\nclass Counter extends PluginComponent {\r\n  // 这里定义插件名称，注意不能重复\r\n  static pluginName = \"file-upload\";\r\n  // 定义按钮被防止在哪个位置，默认为左侧，还可以放置在右侧（right）\r\n  static align = \"left\";\r\n  //图片上传回调\r\n  uploadChange = (info) => {\r\n    if (info.file.status === \"done\") {\r\n      // 插入Markdown\r\n      let str = `[${info.file.response.data.file_name}](${info.file.response.data.url})`;\r\n      this.editor.insertText(str);\r\n    } else if (info.file.status === \"error\") {\r\n      message.error(\"图片上传失败\");\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <span className=\"button button-type-counter\" title=\"插入文件\">\r\n        <Upload\r\n          action=\"/api/site/annex\"\r\n          onChange={(info) => this.uploadChange(info)}\r\n          name=\"0\"\r\n        >\r\n          <UploadOutlined />\r\n        </Upload>\r\n      </span>\r\n    );\r\n  }\r\n}\r\nexport default Counter;\r\n"]}]}