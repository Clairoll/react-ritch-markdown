{"remainingRequest":"D:\\web\\react-ritch-markdown\\node_modules\\thread-loader\\dist\\cjs.js??ref--5-1!D:\\web\\react-ritch-markdown\\node_modules\\babel-loader\\lib\\index.js??ref--5-2!D:\\web\\react-ritch-markdown\\node_modules\\source-map-loader\\index.js!D:\\web\\react-ritch-markdown\\src\\editor\\richText\\index.jsx","dependencies":[{"path":"D:\\web\\react-ritch-markdown\\src\\editor\\richText\\index.jsx","mtime":1609924853225},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\web\\react-ritch-markdown\\node_modules\\source-map-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcbm9kZV9tb2R1bGVzXFxiYWJlbC1wcmVzZXQtcmVhY3QtYXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXG5vZGVfbW9kdWxlc1xcYmFiZWwtcHJlc2V0LXJlYWN0LWFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZ2V0UHJvdG90eXBlT2YiOwppbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcbm9kZV9tb2R1bGVzXFxiYWJlbC1wcmVzZXQtcmVhY3QtYXBwXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkQ6XFx3ZWJcXHJlYWN0LXJpdGNoLW1hcmtkb3duXFxub2RlX21vZHVsZXNcXGJhYmVsLXByZXNldC1yZWFjdC1hcHBcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKdmFyIF9qc3hGaWxlTmFtZSA9ICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcc3JjXFxlZGl0b3JcXHJpY2hUZXh0XFxpbmRleC5qc3giOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgZW50ZXJNb2R1bGUgPSB0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwuZW50ZXJNb2R1bGUgOiB1bmRlZmluZWQ7CiAgZW50ZXJNb2R1bGUgJiYgZW50ZXJNb2R1bGUobW9kdWxlKTsKfSkoKTsKCnZhciBfX3NpZ25hdHVyZV9fID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsWyJkZWZhdWx0Il0uc2lnbmF0dXJlIDogZnVuY3Rpb24gKGEpIHsKICByZXR1cm4gYTsKfTsKCi8qDQogKiBAQXV0b3I6IENsYWlyb2xsDQogKiBARGF0ZTogMjAyMC0wOC0yNSAxNToxNzozNQ0KICogQExhc3RFZGl0VGltZTogMjAyMS0wMS0wNiAxNjozMjo0Ng0KICogQEVtYWlsOiAxNzU1MDMzNDQ1QHFxLmNvbQ0KICogQGRlc2NyaXB0aW9uOiDlr4zmlofmnKznvJbovpHlmagNCiAqLwppbXBvcnQgUmVhY3QgZnJvbSAicmVhY3QiOwppbXBvcnQgeyBVcGxvYWQsIG1lc3NhZ2UgfSBmcm9tICJhbnRkIjsKaW1wb3J0IEJyYWZ0RWRpdG9yIGZyb20gImJyYWZ0LWVkaXRvciI7CmltcG9ydCB7IENvbnRlbnRVdGlscyB9IGZyb20gImJyYWZ0LXV0aWxzIjsKaW1wb3J0IHsgRm9sZGVyQWRkT3V0bGluZWQsIFBpY3R1cmVPdXRsaW5lZCB9IGZyb20gIkBhbnQtZGVzaWduL2ljb25zIjsKaW1wb3J0IEF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IFRhYmxlIGZyb20gImJyYWZ0LWV4dGVuc2lvbnMvZGlzdC90YWJsZSI7CmltcG9ydCAiYnJhZnQtZWRpdG9yL2Rpc3QvaW5kZXguY3NzIjsKaW1wb3J0ICJicmFmdC1leHRlbnNpb25zL2Rpc3QvdGFibGUuY3NzIjsKaW1wb3J0ICIuL2luZGV4Lmxlc3MiOwp2YXIgb3B0aW9ucyA9IHsKICB3aXRoRHJvcGRvd246IHRydWUsCiAgLy8g5o+S5YWl6KGo5qC85YmN5piv5ZCm5by55Ye65LiL5ouJ6I+c5Y2VCiAgY29sdW1uUmVzaXphYmxlOiB0cnVlLAogIC8vIOaYr+WQpuWFgeiuuOaLluWKqOiwg+aVtOWIl+Wuve+8jOm7mOiupGZhbHNlCiAgZXhwb3J0QXR0clN0cmluZzogJ2JvcmRlcj0iMSIgc3R5bGU9ImJvcmRlci1jb2xsYXBzZTogY29sbGFwc2UiJyAvLyDmjIflrprovpPlh7pIVE1M5pe26ZmE5Yqg5YiwdGFibGXmoIfnrb7kuIrnmoTlsZ7mgKflrZfnrKbkuLIKCn07CkJyYWZ0RWRpdG9yLnVzZShUYWJsZShvcHRpb25zKSk7Cgp2YXIgUmljaFRleHRzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7CiAgX2luaGVyaXRzKFJpY2hUZXh0cywgX1JlYWN0JENvbXBvbmVudCk7CgogIGZ1bmN0aW9uIFJpY2hUZXh0cyhwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSaWNoVGV4dHMpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFJpY2hUZXh0cykuY2FsbCh0aGlzLCBwcm9wcykpOwoKICAgIF90aGlzLnVwbG9hZEltYWdlQ2hhbmdlID0gZnVuY3Rpb24gKGluZm8sIGVkaXRvclN0YXRlKSB7CiAgICAgIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAiZG9uZSIpIHsKICAgICAgICAvLyDlr4zmlofmnKzlm77niYfkuIrkvKDmiJDlip/vvIzlsIblm77niYflnLDlnYDliqDlhaXlr4zmlofmnKzlhoXlrrkKICAgICAgICB2YXIgZGF0YSA9IENvbnRlbnRVdGlscy5pbnNlcnRNZWRpYXMoZWRpdG9yU3RhdGUsIFt7CiAgICAgICAgICB0eXBlOiAiSU1BR0UiLAogICAgICAgICAgdXJsOiBpbmZvLmZpbGUucmVzcG9uc2UuZGF0YS51cmwKICAgICAgICB9XSk7CgogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGVkaXRvclN0YXRlOiBkYXRhCiAgICAgICAgfSk7IC8vIOWbnuiwg+e7meeItue7hOS7tgoKCiAgICAgICAgX3RoaXMucHJvcHMuZ2V0VmFsdWUoZGF0YS50b0hUTUwoKSk7CiAgICAgIH0gZWxzZSBpZiAoaW5mby5maWxlLnN0YXR1cyA9PT0gImVycm9yIikgewogICAgICAgIG1lc3NhZ2UuZXJyb3IoIuWbvueJh+S4iuS8oOWksei0pSIpOwogICAgICB9CiAgICB9OwoKICAgIF90aGlzLnVwbG9hZEZpbGVDaGFuZ2UgPSBmdW5jdGlvbiAoaW5mbywgZWRpdG9yU3RhdGUpIHsKICAgICAgaWYgKGluZm8uZmlsZS5zdGF0dXMgPT09ICJkb25lIikgewogICAgICAgIC8vIOWvjOaWh+acrOaWh+S7tuS4iuS8oOaIkOWKn++8jOWwhuWbvueJh+WcsOWdgOWKoOWFpeWvjOaWh+acrOWGheWuuQogICAgICAgIHZhciBkYXRhID0gQ29udGVudFV0aWxzLmluc2VydEhUTUwoZWRpdG9yU3RhdGUsICI8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiIi5jb25jYXQoaW5mby5maWxlLnJlc3BvbnNlLmRhdGEudXJsLCAiXCI+IikuY29uY2F0KGluZm8uZmlsZS5yZXNwb25zZS5kYXRhLmZpbGVfbmFtZSwgIjwvYT4iKSk7CgogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGVkaXRvclN0YXRlOiBkYXRhCiAgICAgICAgfSk7IC8vIOWbnuiwg+e7meeItue7hOS7tgoKCiAgICAgICAgX3RoaXMucHJvcHMuZ2V0VmFsdWUoZGF0YS50b0hUTUwoKSk7CiAgICAgIH0gZWxzZSBpZiAoaW5mby5maWxlLnN0YXR1cyA9PT0gImVycm9yIikgewogICAgICAgIG1lc3NhZ2UuZXJyb3IoIuaWh+S7tuS4iuS8oOWksei0pSIpOwogICAgICB9CiAgICB9OwoKICAgIF90aGlzLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGVkaXRvclN0YXRlKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBlZGl0b3JTdGF0ZTogZWRpdG9yU3RhdGUKICAgICAgfSwgX3RoaXMucHJvcHMuZ2V0VmFsdWUoZWRpdG9yU3RhdGUudG9IVE1MKCkpKTsKICAgIH07CgogICAgX3RoaXMuY2xlYXJDb250ZW50ID0gZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgZWRpdG9yU3RhdGU6IENvbnRlbnRVdGlscy5jbGVhcihfdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZSkKICAgICAgfSk7CiAgICB9OwoKICAgIF90aGlzLm15VXBsb2FkRm4gPSBmdW5jdGlvbiAocGFyYW0pIHsKICAgICAgdmFyIG9iaiA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBvYmouYXBwZW5kKCJuYW1lIiwgcGFyYW0uZmlsZS5uYW1lKTsKICAgICAgb2JqLmFwcGVuZCgiMCIsIHBhcmFtLmZpbGUpOwogICAgICBBeGlvcy5wb3N0KCIvYXBpL3NpdGUvaW1hZ2UiLCBvYmopLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICBwYXJhbS5zdWNjZXNzKHsKICAgICAgICAgICAgdXJsOiBkYXRhLnVybCwKICAgICAgICAgICAgbWV0YTogewogICAgICAgICAgICAgIGlkOiBkYXRhLmlkLAogICAgICAgICAgICAgIHRpdGxlOiBkYXRhLm5hbWUsCiAgICAgICAgICAgICAgYWx0OiBkYXRhLm5hbWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgcGFyYW0uZXJyb3IoewogICAgICAgICAgbXNnOiAi5LiK5Lyg5aSx6LSlISIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9OwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBlZGl0b3JTdGF0ZTogQnJhZnRFZGl0b3IuY3JlYXRlRWRpdG9yU3RhdGUobnVsbCksCiAgICAgIGRlZmF1bHRWYWx1ZTogQnJhZnRFZGl0b3IuY3JlYXRlRWRpdG9yU3RhdGUobnVsbCkKICAgIH07CiAgICBfdGhpcy5leHRlbmRDb250cm9scyA9IFt7CiAgICAgIGtleTogImFudGQtdXBsb2FkZXIiLAogICAgICB0eXBlOiAiY29tcG9uZW50IiwKICAgICAgY29tcG9uZW50OiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChVcGxvYWQsIHsKICAgICAgICBhY3Rpb246ICIvYXBpL3NpdGUvaW1hZ2UiLAogICAgICAgIGFjY2VwdDogImltYWdlLyoiLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShpbmZvKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMudXBsb2FkSW1hZ2VDaGFuZ2UoaW5mbywgX3RoaXMuc3RhdGUuZWRpdG9yU3RhdGUpOwogICAgICAgIH0sCiAgICAgICAgc2hvd1VwbG9hZExpc3Q6IGZhbHNlLAogICAgICAgIG5hbWU6ICIwIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBuYW1lOiAiMCIKICAgICAgICB9LAogICAgICAgIF9fc2VsZjogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiA0MCwKICAgICAgICAgIGNvbHVtbk51bWJlcjogMTEKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgY2xhc3NOYW1lOiAiY29udHJvbC1pdGVtIGJ1dHRvbiB1cGxvYWQtYnV0dG9uIiwKICAgICAgICAiZGF0YS10aXRsZSI6ICJcdTYzRDJcdTUxNjVcdTU2RkVcdTcyNDciLAogICAgICAgIF9fc2VsZjogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiA1MywKICAgICAgICAgIGNvbHVtbk51bWJlcjogMTMKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBpY3R1cmVPdXRsaW5lZCwgewogICAgICAgIF9fc2VsZjogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiA1OCwKICAgICAgICAgIGNvbHVtbk51bWJlcjogMTUKICAgICAgICB9CiAgICAgIH0pKSkKICAgIH0sIHsKICAgICAga2V5OiAiYW50ZC1kaXJlY3RvcnkiLAogICAgICB0eXBlOiAiY29tcG9uZW50IiwKICAgICAgY29tcG9uZW50OiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChVcGxvYWQsIHsKICAgICAgICBhY3Rpb246ICIvYXBpL3NpdGUvYW5uZXgiLAogICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShpbmZvKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMudXBsb2FkRmlsZUNoYW5nZShpbmZvLCBfdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZSk7CiAgICAgICAgfSwKICAgICAgICBuYW1lOiAiMCIsCiAgICAgICAgc2hvd1VwbG9hZExpc3Q6IGZhbHNlLAogICAgICAgIF9fc2VsZjogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiA2NywKICAgICAgICAgIGNvbHVtbk51bWJlcjogMTEKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgY2xhc3NOYW1lOiAiY29udHJvbC1pdGVtIGJ1dHRvbiB1cGxvYWQtYnV0dG9uIiwKICAgICAgICAiZGF0YS10aXRsZSI6ICJcdTRFMEFcdTRGMjBcdTY1ODdcdTRFRjYiLAogICAgICAgIF9fc2VsZjogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksCiAgICAgICAgX19zb3VyY2U6IHsKICAgICAgICAgIGZpbGVOYW1lOiBfanN4RmlsZU5hbWUsCiAgICAgICAgICBsaW5lTnVtYmVyOiA3NiwKICAgICAgICAgIGNvbHVtbk51bWJlcjogMTMKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvbGRlckFkZE91dGxpbmVkLCB7CiAgICAgICAgX19zZWxmOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDgxLAogICAgICAgICAgY29sdW1uTnVtYmVyOiAxNQogICAgICAgIH0KICAgICAgfSkpKQogICAgfV07CiAgICByZXR1cm4gX3RoaXM7CiAgfSAvL+WbvueJh+S4iuS8oOWbnuiwgwoKCiAgX2NyZWF0ZUNsYXNzKFJpY2hUZXh0cywgW3sKICAgIGtleTogImNvbXBvbmVudERpZFVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykgewogICAgICBpZiAocHJldlByb3BzLmRlZmF1bHRWYWx1ZSAhPT0gdGhpcy5zdGF0ZS5kZWZhdWx0VmFsdWUpIHsKICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGVkaXRvclN0YXRlOiBCcmFmdEVkaXRvci5jcmVhdGVFZGl0b3JTdGF0ZShwcmV2UHJvcHMuZGVmYXVsdFZhbHVlKSwKICAgICAgICAgIGRlZmF1bHRWYWx1ZTogcHJldlByb3BzLmRlZmF1bHRWYWx1ZQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBlZGl0b3JTdGF0ZSA9IHRoaXMuc3RhdGUuZWRpdG9yU3RhdGU7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGlkOiAibXlSaXRjaCIsCiAgICAgICAgX19zZWxmOiB0aGlzLAogICAgICAgIF9fc291cmNlOiB7CiAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLAogICAgICAgICAgbGluZU51bWJlcjogMTc1LAogICAgICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCcmFmdEVkaXRvciwgewogICAgICAgIHZhbHVlOiBlZGl0b3JTdGF0ZSwKICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZSwKICAgICAgICBtZWRpYTogewogICAgICAgICAgdXBsb2FkRm46IHRoaXMubXlVcGxvYWRGbgogICAgICAgIH0sCiAgICAgICAgaWQ6ICJlZGl0b3ItaWQiLAogICAgICAgIGV4dGVuZENvbnRyb2xzOiB0aGlzLmV4dGVuZENvbnRyb2xzLAogICAgICAgIF9fc2VsZjogdGhpcywKICAgICAgICBfX3NvdXJjZTogewogICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgICAgIGxpbmVOdW1iZXI6IDE3NiwKICAgICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9fcmVhY3RzdGFuZGluX19yZWdlbmVyYXRlQnlFdmFsIiwKICAgIC8vIEB0cy1pZ25vcmUKICAgIHZhbHVlOiBmdW5jdGlvbiBfX3JlYWN0c3RhbmRpbl9fcmVnZW5lcmF0ZUJ5RXZhbChrZXksIGNvZGUpIHsKICAgICAgLy8gQHRzLWlnbm9yZQogICAgICB0aGlzW2tleV0gPSBldmFsKGNvZGUpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFJpY2hUZXh0czsKfShSZWFjdC5Db21wb25lbnQpOwoKUmljaFRleHRzLmRlZmF1bHRQcm9wcyA9IHsKICBnZXRWYWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoZGF0YSkgewogICAgcmV0dXJuIGRhdGE7CiAgfSwKICBkZWZhdWx0VmFsdWU6ICcnCn07CnZhciBfZGVmYXVsdCA9IFJpY2hUZXh0czsKZXhwb3J0IGRlZmF1bHQgX2RlZmF1bHQ7CgppZiAodHlwZW9mIFJpY2hUZXh0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgUmljaFRleHRzICYmIFJpY2hUZXh0cyA9PT0gT2JqZWN0KFJpY2hUZXh0cykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShSaWNoVGV4dHMpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJpY2hUZXh0cywgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIlJpY2hUZXh0cyIsCiAgICAgIGZpbGVuYW1lOiAic3JjXFxlZGl0b3JcXHJpY2hUZXh0XFxpbmRleC5qc3giCiAgICB9CiAgfSk7Cn0KCjsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHJlYWN0SG90TG9hZGVyID0gdHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsLmRlZmF1bHQgOiB1bmRlZmluZWQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKG9wdGlvbnMsICJvcHRpb25zIiwgIkQ6XFx3ZWJcXHJlYWN0LXJpdGNoLW1hcmtkb3duXFxzcmNcXGVkaXRvclxccmljaFRleHRcXGluZGV4LmpzeCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKFJpY2hUZXh0cywgIlJpY2hUZXh0cyIsICJEOlxcd2ViXFxyZWFjdC1yaXRjaC1tYXJrZG93blxcc3JjXFxlZGl0b3JcXHJpY2hUZXh0XFxpbmRleC5qc3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihfZGVmYXVsdCwgImRlZmF1bHQiLCAiRDpcXHdlYlxccmVhY3Qtcml0Y2gtbWFya2Rvd25cXHNyY1xcZWRpdG9yXFxyaWNoVGV4dFxcaW5kZXguanN4Iik7Cn0pKCk7Cgo7CgooZnVuY3Rpb24gKCkgewogIHZhciBsZWF2ZU1vZHVsZSA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbC5sZWF2ZU1vZHVsZSA6IHVuZGVmaW5lZDsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["D:/web/react-ritch-markdown/src/editor/richText/index.jsx"],"names":["React","Upload","message","BraftEditor","ContentUtils","FolderAddOutlined","PictureOutlined","Axios","Table","options","withDropdown","columnResizable","exportAttrString","use","RichTexts","props","uploadImageChange","info","editorState","file","status","data","insertMedias","type","url","response","setState","getValue","toHTML","error","uploadFileChange","insertHTML","file_name","onChange","clearContent","clear","state","myUploadFn","param","obj","FormData","append","name","post","then","res","code","success","meta","id","title","alt","console","log","err","msg","createEditorState","defaultValue","extendControls","key","component","prevProps","uploadFn","Component","defaultProps"],"mappings":"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","sourcesContent":["/*\r\n * @Autor: Clairoll\r\n * @Date: 2020-08-25 15:17:35\r\n * @LastEditTime: 2021-01-06 16:32:46\r\n * @Email: 1755033445@qq.com\r\n * @description: 富文本编辑器\r\n */\r\nimport React from \"react\";\r\nimport { Upload, message } from \"antd\";\r\nimport BraftEditor from \"braft-editor\";\r\nimport { ContentUtils } from \"braft-utils\";\r\nimport { FolderAddOutlined, PictureOutlined } from \"@ant-design/icons\";\r\nimport Axios from \"axios\";\r\nimport Table from \"braft-extensions/dist/table\";\r\nimport \"braft-editor/dist/index.css\";\r\nimport \"braft-extensions/dist/table.css\";\r\n\r\nimport \"./index.less\";\r\n\r\nconst options = {\r\n  withDropdown: true, // 插入表格前是否弹出下拉菜单\r\n  columnResizable: true, // 是否允许拖动调整列宽，默认false\r\n  exportAttrString: 'border=\"1\" style=\"border-collapse: collapse\"', // 指定输出HTML时附加到table标签上的属性字符串\r\n};\r\n\r\nBraftEditor.use(Table(options));\r\nclass RichTexts extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      editorState: BraftEditor.createEditorState(null),\r\n      defaultValue: BraftEditor.createEditorState(null),\r\n    };\r\n\r\n    this.extendControls = [\r\n      {\r\n        key: \"antd-uploader\",\r\n        type: \"component\",\r\n        component: (\r\n          <Upload\r\n            action=\"/api/site/image\"\r\n            accept=\"image/*\"\r\n            onChange={(info) =>\r\n              this.uploadImageChange(info, this.state.editorState)\r\n            }\r\n            showUploadList={false}\r\n            name=\"0\"\r\n            data={{\r\n              name: \"0\",\r\n            }}\r\n          >\r\n            {/* 这里的按钮最好加上type=\"button\"，以避免在表单容器中触发表单提交，用Antd的Button组件则无需如此 */}\r\n            <button\r\n              type=\"button\"\r\n              className=\"control-item button upload-button\"\r\n              data-title=\"插入图片\"\r\n            >\r\n              <PictureOutlined />\r\n            </button>\r\n          </Upload>\r\n        ),\r\n      },\r\n      {\r\n        key: \"antd-directory\",\r\n        type: \"component\",\r\n        component: (\r\n          <Upload\r\n            action=\"/api/site/annex\"\r\n            onChange={(info) =>\r\n              this.uploadFileChange(info, this.state.editorState)\r\n            }\r\n            name=\"0\"\r\n            showUploadList={false}\r\n          >\r\n            {/* 这里的按钮最好加上type=\"button\"，以避免在表单容器中触发表单提交，用Antd的Button组件则无需如此 */}\r\n            <button\r\n              type=\"button\"\r\n              className=\"control-item button upload-button\"\r\n              data-title=\"上传文件\"\r\n            >\r\n              <FolderAddOutlined />\r\n            </button>\r\n          </Upload>\r\n        ),\r\n      },\r\n    ];\r\n  }\r\n\r\n  //图片上传回调\r\n  uploadImageChange = (info, editorState) => {\r\n    if (info.file.status === \"done\") {\r\n      // 富文本图片上传成功，将图片地址加入富文本内容\r\n      let data = ContentUtils.insertMedias(editorState, [\r\n        { type: \"IMAGE\", url: info.file.response.data.url },\r\n      ]);\r\n      this.setState({ editorState: data });\r\n      // 回调给父组件\r\n      this.props.getValue(data.toHTML());\r\n    } else if (info.file.status === \"error\") {\r\n      message.error(\"图片上传失败\");\r\n    }\r\n  };\r\n\r\n  //文件上传回调\r\n  uploadFileChange = (info, editorState) => {\r\n    if (info.file.status === \"done\") {\r\n      // 富文本文件上传成功，将图片地址加入富文本内容\r\n      let data = ContentUtils.insertHTML(\r\n        editorState,\r\n        `<a target=\"_blank\" href=\"${info.file.response.data.url}\">${info.file.response.data.file_name}</a>`\r\n      );\r\n\r\n      this.setState({ editorState: data });\r\n      // 回调给父组件\r\n      this.props.getValue(data.toHTML());\r\n    } else if (info.file.status === \"error\") {\r\n      message.error(\"文件上传失败\");\r\n    }\r\n  };\r\n\r\n  // 内容改变\r\n  onChange = (editorState) => {\r\n    this.setState(\r\n      {\r\n        editorState: editorState,\r\n      },\r\n      this.props.getValue(editorState.toHTML())\r\n    );\r\n  };\r\n\r\n  // 清空编辑器\r\n  clearContent = () => {\r\n    this.setState({ editorState: ContentUtils.clear(this.state.editorState) });\r\n  };\r\n\r\n  // 粘贴图片上传\r\n  myUploadFn = (param) => {\r\n    let obj = new FormData();\r\n    obj.append(\"name\", param.file.name);\r\n    obj.append(\"0\", param.file);\r\n    Axios.post(\"/api/site/image\", obj)\r\n      .then((res) => {\r\n        if (res.data && res.data.code === 0) {\r\n          let data = res.data.data;\r\n          param.success({\r\n            url: data.url,\r\n            meta: {\r\n              id: data.id,\r\n              title: data.name,\r\n              alt: data.name,\r\n            },\r\n          });\r\n        }\r\n        console.log(res);\r\n      })\r\n      .catch((err) => {\r\n        param.error({\r\n          msg: \"上传失败!\",\r\n        });\r\n      });\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.defaultValue !== this.state.defaultValue) {\r\n      this.setState({\r\n        editorState: BraftEditor.createEditorState(prevProps.defaultValue),\r\n        defaultValue: prevProps.defaultValue,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { editorState } = this.state;\r\n    return (\r\n      <div id=\"myRitch\">\r\n        <BraftEditor\r\n          value={editorState}\r\n          onChange={this.onChange}\r\n          media={{\r\n            uploadFn: this.myUploadFn,\r\n          }}\r\n          id=\"editor-id\"\r\n          extendControls={this.extendControls}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nRichTexts.defaultProps = {\r\n  getValue: (data) => {\r\n    return data;\r\n  },\r\n  defaultValue:''\r\n};\r\n\r\nexport default RichTexts;\r\n"]}]}